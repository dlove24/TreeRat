<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>TreeRat: DNSQuery Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TreeRat
   &#160;<span id="projectnumber">0.0.2</span>
   </div>
   <div id="projectbrief">Network node configuration, using ONA data</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="class_d_n_s_query-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">DNSQuery Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Represents a list named resources (of a type specified as a <code>DNSQueryRecord</code>) held within the Domain Name System (<code>DNS</code>).  
 <a href="class_d_n_s_query.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="dnsutils__old_8h_source.html">dnsutils_old.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for DNSQuery:</div>
<div class="dyncontent">
<div class="center"><img src="class_d_n_s_query__coll__graph.png" border="0" usemap="#_d_n_s_query_coll__map" alt="Collaboration graph"/></div>
<map name="_d_n_s_query_coll__map" id="_d_n_s_query_coll__map">
<area shape="rect" id="node4" href="class_d_n_s_record.html" title="Defines an individual DNS record, used as the return type by many of the methods of the DNSList class..." alt="" coords="35,189,125,216"/><area shape="rect" id="node6" title="STL class." alt="" coords="119,99,192,125"/><area shape="rect" id="node10" href="struct_d_n_s_query_parameters.html" title="Low&#45;Level DNS Buffer Type." alt="" coords="157,240,307,267"/><area shape="rect" id="node8" title="STL class." alt="" coords="97,6,215,47"/><area shape="rect" id="node13" title="STL class." alt="" coords="365,299,444,325"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9eabb7b77aa3230e04ed0fcbb07616b6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_n_s_query.html#a9eabb7b77aa3230e04ed0fcbb07616b6">DNSQuery</a> ()</td></tr>
<tr class="memdesc:a9eabb7b77aa3230e04ed0fcbb07616b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a <code><a class="el" href="class_d_n_s_query.html" title="Represents a list named resources (of a type specified as a DNSQueryRecord) held within the Domain Na...">DNSQuery</a></code> class, but leave the class unconfigured.  <a href="#a9eabb7b77aa3230e04ed0fcbb07616b6"></a><br/></td></tr>
<tr class="separator:a9eabb7b77aa3230e04ed0fcbb07616b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe10624cc033e7d7c5e7f0dbe76e2527"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abe10624cc033e7d7c5e7f0dbe76e2527"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_n_s_query.html#abe10624cc033e7d7c5e7f0dbe76e2527">DNSQuery</a> (const std::string dns_name)</td></tr>
<tr class="memdesc:abe10624cc033e7d7c5e7f0dbe76e2527"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a <code><a class="el" href="class_d_n_s_query.html" title="Represents a list named resources (of a type specified as a DNSQueryRecord) held within the Domain Na...">DNSQuery</a></code> class, defaulting to retrieving a <code>DNSNames::AAAA</code> for the <code>dns_name</code>. <br/></td></tr>
<tr class="separator:abe10624cc033e7d7c5e7f0dbe76e2527"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfe146429998a9f7bc9f477e4e7d0a10"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adfe146429998a9f7bc9f477e4e7d0a10"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_n_s_query.html#adfe146429998a9f7bc9f477e4e7d0a10">DNSQuery</a> (const std::string dns_name, const DNSRecordType dns_query_type)</td></tr>
<tr class="memdesc:adfe146429998a9f7bc9f477e4e7d0a10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a <code><a class="el" href="class_d_n_s_query.html" title="Represents a list named resources (of a type specified as a DNSQueryRecord) held within the Domain Na...">DNSQuery</a></code> class to hold the given <code>name</code> of the given <code>DNS</code> resource record type. <br/></td></tr>
<tr class="separator:adfe146429998a9f7bc9f477e4e7d0a10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa21e3d860d1bfded12f0b04b9b21834"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_n_s_query.html#afa21e3d860d1bfded12f0b04b9b21834">operator std::string</a> (void) const </td></tr>
<tr class="memdesc:afa21e3d860d1bfded12f0b04b9b21834"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allow type conversions to a <code>std::string</code>.  <a href="#afa21e3d860d1bfded12f0b04b9b21834"></a><br/></td></tr>
<tr class="separator:afa21e3d860d1bfded12f0b04b9b21834"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a699e54ed8e105183b5ef7a6f2275688c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_n_s_query.html#a699e54ed8e105183b5ef7a6f2275688c">operator const char *</a> (void) const </td></tr>
<tr class="memdesc:a699e54ed8e105183b5ef7a6f2275688c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allow type conversion to a <code>C-style</code> (<code>char*</code>) string.  <a href="#a699e54ed8e105183b5ef7a6f2275688c"></a><br/></td></tr>
<tr class="separator:a699e54ed8e105183b5ef7a6f2275688c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46d6b53a26e4bea89df9f7f8756345b6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_n_s_query.html#a46d6b53a26e4bea89df9f7f8756345b6">operator const boost::asio::ip::address</a> (void)</td></tr>
<tr class="memdesc:a46d6b53a26e4bea89df9f7f8756345b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allow type conversion to a <code>boost::asio::ip::address</code>.  <a href="#a46d6b53a26e4bea89df9f7f8756345b6"></a><br/></td></tr>
<tr class="separator:a46d6b53a26e4bea89df9f7f8756345b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34e26c08e68da9d9cad559c42c9f9a49"><td class="memItemLeft" align="right" valign="top">const std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_n_s_query.html#a34e26c08e68da9d9cad559c42c9f9a49">to_str</a> (void) const </td></tr>
<tr class="memdesc:a34e26c08e68da9d9cad559c42c9f9a49"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert the internal <code>DNS</code> resource representation to a <code>std::string</code>.  <a href="#a34e26c08e68da9d9cad559c42c9f9a49"></a><br/></td></tr>
<tr class="separator:a34e26c08e68da9d9cad559c42c9f9a49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1dc87f740b5d681cc39c49e24637cecf"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_n_s_query.html#a1dc87f740b5d681cc39c49e24637cecf">to_c_str</a> (void) const </td></tr>
<tr class="memdesc:a1dc87f740b5d681cc39c49e24637cecf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert the internal <code>DNS</code> resource representation to a <code>C-style</code> (<code>char*</code>) string.  <a href="#a1dc87f740b5d681cc39c49e24637cecf"></a><br/></td></tr>
<tr class="separator:a1dc87f740b5d681cc39c49e24637cecf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac02b35631ab44965403bd9fff68b5ae0"><td class="memItemLeft" align="right" valign="top">const boost::asio::ip::address&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_n_s_query.html#ac02b35631ab44965403bd9fff68b5ae0">to_ip</a> (bool recursive=true, bool prefer_legacy=false)</td></tr>
<tr class="memdesc:ac02b35631ab44965403bd9fff68b5ae0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert the internal <code>DNS</code> resource representation to a <code>boost::ip::address</code>.  <a href="#ac02b35631ab44965403bd9fff68b5ae0"></a><br/></td></tr>
<tr class="separator:ac02b35631ab44965403bd9fff68b5ae0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a2234f5b9f47bc03b4d1dcf032761cfd6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_n_s_query.html#a2234f5b9f47bc03b4d1dcf032761cfd6">send_dns_query</a> (<a class="el" href="struct_d_n_s_query_parameters.html">DNSQueryParameters</a> dns_query)</td></tr>
<tr class="memdesc:a2234f5b9f47bc03b4d1dcf032761cfd6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Package a <code>DNS</code> query into a <code><a class="el" href="struct_d_n_s_query_parameters.html" title="Low-Level DNS Buffer Type.">DNSQueryParameters</a></code> structure, and send the query to the local <code>DNS</code> resolver.  <a href="#a2234f5b9f47bc03b4d1dcf032761cfd6"></a><br/></td></tr>
<tr class="separator:a2234f5b9f47bc03b4d1dcf032761cfd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20720148968df6c0248bed3c54cf1f16"><td class="memItemLeft" align="right" valign="top">std::future&lt; <a class="el" href="struct_d_n_s_query_parameters.html">DNSQueryParameters</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_n_s_query.html#a20720148968df6c0248bed3c54cf1f16">get_dns_query</a> (void)</td></tr>
<tr class="memdesc:a20720148968df6c0248bed3c54cf1f16"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a <code><a class="el" href="struct_d_n_s_query_parameters.html" title="Low-Level DNS Buffer Type.">DNSQueryParameters</a></code> structure, which has been filled in response to an earlier call to <code><a class="el" href="class_d_n_s_query.html#a2234f5b9f47bc03b4d1dcf032761cfd6" title="Package a DNS query into a DNSQueryParameters structure, and send the query to the local DNS resolver...">send_dns_query()</a></code>.  <a href="#a20720148968df6c0248bed3c54cf1f16"></a><br/></td></tr>
<tr class="separator:a20720148968df6c0248bed3c54cf1f16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a542252fbaa872ebc370a0c317400a2ef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_n_s_query.html#a542252fbaa872ebc370a0c317400a2ef">extract_resource_records</a> (void)</td></tr>
<tr class="memdesc:a542252fbaa872ebc370a0c317400a2ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extract the named resources from a <code>DNSRecordBuffer</code> of type <code>ns_query_type</code>, returned by the low-level, operating system resolver routines.  <a href="#a542252fbaa872ebc370a0c317400a2ef"></a><br/></td></tr>
<tr class="separator:a542252fbaa872ebc370a0c317400a2ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr class="memitem:a4a4ac43f842d22b179c88158158af4a2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4a4ac43f842d22b179c88158158af4a2"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>do_dns_query</b> (DNSQueryPromise dns_query_promise)</td></tr>
<tr class="separator:a4a4ac43f842d22b179c88158158af4a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a22274959083a0f49ed441a4730649ac8"><td class="memItemLeft" align="right" valign="top">DNSList&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_n_s_query.html#a22274959083a0f49ed441a4730649ac8">cv_dns_record_list</a></td></tr>
<tr class="memdesc:a22274959083a0f49ed441a4730649ac8"><td class="mdescLeft">&#160;</td><td class="mdescRight">The internal list of DNS records.  <a href="#a22274959083a0f49ed441a4730649ac8"></a><br/></td></tr>
<tr class="separator:a22274959083a0f49ed441a4730649ac8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c5a145915a8aa95877be69df7f3925f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5c5a145915a8aa95877be69df7f3925f"></a>
<a class="el" href="struct_d_n_s_query_parameters.html">DNSQueryParameters</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_n_s_query.html#a5c5a145915a8aa95877be69df7f3925f">cv_dns_last_query</a></td></tr>
<tr class="memdesc:a5c5a145915a8aa95877be69df7f3925f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the last query to be processed by <code>do_dns_query</code>. <br/></td></tr>
<tr class="separator:a5c5a145915a8aa95877be69df7f3925f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdc2251853c1db01be0943a68e2aad9a"><td class="memItemLeft" align="right" valign="top">DNSQueryPromise&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_n_s_query.html#afdc2251853c1db01be0943a68e2aad9a">cv_dns_query_promise</a></td></tr>
<tr class="memdesc:afdc2251853c1db01be0943a68e2aad9a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the structure to be returned by a <code>DNS</code> query, on behalf of <code><a class="el" href="class_d_n_s_query.html#a2234f5b9f47bc03b4d1dcf032761cfd6" title="Package a DNS query into a DNSQueryParameters structure, and send the query to the local DNS resolver...">send_dns_query()</a></code>.  <a href="#afdc2251853c1db01be0943a68e2aad9a"></a><br/></td></tr>
<tr class="separator:afdc2251853c1db01be0943a68e2aad9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8077833d9094386c5a9893a8fa800a76"><td class="memItemLeft" align="right" valign="top">DNSQueryFuture&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_n_s_query.html#a8077833d9094386c5a9893a8fa800a76">cv_dns_query_future</a></td></tr>
<tr class="memdesc:a8077833d9094386c5a9893a8fa800a76"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the sturcture that is returned in <code><a class="el" href="class_d_n_s_query.html#a20720148968df6c0248bed3c54cf1f16" title="Return a DNSQueryParameters structure, which has been filled in response to an earlier call to send_d...">get_dns_query()</a></code>, following a previous call to <code><a class="el" href="class_d_n_s_query.html#a2234f5b9f47bc03b4d1dcf032761cfd6" title="Package a DNS query into a DNSQueryParameters structure, and send the query to the local DNS resolver...">send_dns_query()</a></code>.  <a href="#a8077833d9094386c5a9893a8fa800a76"></a><br/></td></tr>
<tr class="separator:a8077833d9094386c5a9893a8fa800a76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25b6d0799e53ecb8f15a134b3890ea98"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a25b6d0799e53ecb8f15a134b3890ea98"></a>
std::thread&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_n_s_query.html#a25b6d0799e53ecb8f15a134b3890ea98">cv_dns_query_thread</a></td></tr>
<tr class="memdesc:a25b6d0799e53ecb8f15a134b3890ea98"><td class="mdescLeft">&#160;</td><td class="mdescRight">The thread object which is responsible for fufilling the <code>DNS</code> query. <br/></td></tr>
<tr class="separator:a25b6d0799e53ecb8f15a134b3890ea98"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Represents a list named resources (of a type specified as a <code>DNSQueryRecord</code>) held within the Domain Name System (<code>DNS</code>). </p>
<p>In essence this class holds the response of a <em>single</em> <code>DNS</code> query: for instance the <code>IP</code> addresses associated with a given domain name, or the list of mail servers for a particular domain.</p>
<p>Although this class assumes that many names may be associated with a given resource name, in practice many names will only have one association. For example a query for the <code>A</code> record of a domain name will typically yield a single <code>IPv4</code> address. Where only one name is found, that name will always be used (and returned) by the conversion methods of this class.</p>
<p>In cases where multiple names are found, the class will return the names according the <code>DNSRecordType</code> of the original query as follows</p>
<ul>
<li><code>DNSRecordType::A</code> A random name is selected from the list of names.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>The <code>DNS</code> system provides a mapping of names to other names. Some of these 'names' can be interpreted as IP4/IP6 addresses (e.g. <code>A</code> and <code>AAAA</code> resource types): but the nature of the DNS system allows a much broader set of returned answers. The name of this class alludes to the intention of providing broad, high-level access to data held in the <code>DNS</code> system. </dd></dl>

<p>Definition at line <a class="el" href="dnsutils__old_8h_source.html#l00500">500</a> of file <a class="el" href="dnsutils__old_8h_source.html">dnsutils_old.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a9eabb7b77aa3230e04ed0fcbb07616b6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">DNSQuery::DNSQuery </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Construct a <code><a class="el" href="class_d_n_s_query.html" title="Represents a list named resources (of a type specified as a DNSQueryRecord) held within the Domain Na...">DNSQuery</a></code> class, but leave the class unconfigured. </p>
<dl class="section warning"><dt>Warning</dt><dd>Internally the list of resource records will be empty, and no DNS query will be sent. This will mean the conversion functions will produce strange output if called. </dd></dl>

<p>Definition at line <a class="el" href="dnsutils__old_8h_source.html#l00607">607</a> of file <a class="el" href="dnsutils__old_8h_source.html">dnsutils_old.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a542252fbaa872ebc370a0c317400a2ef"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void DNSQuery::extract_resource_records </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Extract the named resources from a <code>DNSRecordBuffer</code> of type <code>ns_query_type</code>, returned by the low-level, operating system resolver routines. </p>
<p>Extract the named resources from a <code>DNSQueryBuffer</code> of type <code>ns_query_type</code>, returned by the low-level, operating system resolver routines.</p>
<p>Even if more than one record type is present, only those of <code>ns_query_type</code> will be considered. All valid records of that type will then be parsed, and added to the internal <code>cv_dns_record_list</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">query_buffer</td><td>The <code>DNS</code> response buffer, returned by a call to <code>res_search</code> or <code>res_query</code>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buffer_length</td><td>The size of the <code>query_buffer:</code> usually found as as the return code for <code>res_search</code> or <code>res_query</code>.</td></tr>
  </table>
  </dd>
</dl>
<p>Example Usage:</p>
<div class="fragment"><div class="line"><span class="comment">// Parse the returned buffer, to create the list of names. The list of names itself</span></div>
<div class="line"><span class="comment">// is placed in cv_dns_record_list</span></div>
<div class="line"><a class="code" href="class_d_n_s_query.html#a542252fbaa872ebc370a0c317400a2ef" title="Extract the named resources from a DNSRecordBuffer of type ns_query_type, returned by the low-level...">extract_resource_records</a> (&amp;buffer, buffer_length);</div>
</div><!-- fragment --> 
<p>Definition at line <a class="el" href="dnsutils-resolv_8cpp_source.html#l00252">252</a> of file <a class="el" href="dnsutils-resolv_8cpp_source.html">dnsutils-resolv.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a20720148968df6c0248bed3c54cf1f16"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::future&lt; <a class="el" href="struct_d_n_s_query_parameters.html">DNSQueryParameters</a> &gt; DNSQuery::get_dns_query </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return a <code><a class="el" href="struct_d_n_s_query_parameters.html" title="Low-Level DNS Buffer Type.">DNSQueryParameters</a></code> structure, which has been filled in response to an earlier call to <code><a class="el" href="class_d_n_s_query.html#a2234f5b9f47bc03b4d1dcf032761cfd6" title="Package a DNS query into a DNSQueryParameters structure, and send the query to the local DNS resolver...">send_dns_query()</a></code>. </p>
<p>Package the current <code>DNS</code> data held in the internal class variables as a <code>DNS</code> query, and send the query to the local <code>DNS</code> resolver.</p>
<p>If the query data is ready then the function will return the relevant data immediatly. However, if the <code>DNS</code> query data is not yet available, this function <em>will</em> block until the data is ready.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">future&lt;DNSQueryParameters&gt;</td><td>A <code><a class="el" href="struct_d_n_s_query_parameters.html" title="Low-Level DNS Buffer Type.">DNSQueryParameters</a></code> structure, representing both the inital <code>DNS</code> query and the response (if any).</td></tr>
  </table>
  </dd>
</dl>
<p>In asyncronous useage, this call forms the future <code>std::promise</code>, later accessed by the routines relying on the <code>cv_dns_record_list</code>.</p>
<p>Example Usage:</p>
<p>Example Usage:</p>
<div class="fragment"><div class="line">cv_dns_query_name = dns_name;</div>
<div class="line">cv_dns_query_type = dns_query_type;</div>
<div class="line"><a class="code" href="class_d_n_s_query.html#a22274959083a0f49ed441a4730649ac8" title="The internal list of DNS records.">cv_dns_record_list</a> = <span class="keyword">new</span> list&lt;string&gt;;</div>
<div class="line"></div>
<div class="line"><a class="code" href="class_d_n_s_query.html#a2234f5b9f47bc03b4d1dcf032761cfd6" title="Package a DNS query into a DNSQueryParameters structure, and send the query to the local DNS resolver...">send_dns_query</a>();</div>
</div><!-- fragment --><p>void <a class="el" href="class_d_n_s_query.html#a2234f5b9f47bc03b4d1dcf032761cfd6" title="Package a DNS query into a DNSQueryParameters structure, and send the query to the local DNS resolver...">DNSQuery::send_dns_query</a> (void) { DNSQueryBuffer buffer; // The buffer for the DNS response int buffer_length {-1}; // The length of the DNS response in the buffer</p>
<p>If the list of DNS records is empty, send a query for the A records of the named resource buffer_length = res_search (cv_dns_query_name.c_str(), C_IN, convert_to_ns_type (cv_dns_query_type), (u_char*) &amp;buffer, sizeof (buffer));</p>
<p>if (buffer_length &lt; 0) { throw <a class="el" href="class_d_n_s_exception.html" title="Generic exception class for DNS errors.">DNSException</a> ("Failed to reach a valid DNS source"); }</p>
<p>Parse the returned buffer, to create the list of names. The list of names itself is placed in cv_dns_record_list extract_resource_records (&amp;buffer, buffer_length); } Return a <code><a class="el" href="struct_d_n_s_query_parameters.html" title="Low-Level DNS Buffer Type.">DNSQueryParameters</a></code> structure, which has been filled in response to an earlier call to <code><a class="el" href="class_d_n_s_query.html#a2234f5b9f47bc03b4d1dcf032761cfd6" title="Package a DNS query into a DNSQueryParameters structure, and send the query to the local DNS resolver...">send_dns_query()</a></code>. If the query data is ready then the function will return the relevant data immediatly. However, if the  DNS query data is not yet available, this function <em>will</em> block until the data is ready.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">future&lt;DNSQueryParameters&gt;</td><td>A <code><a class="el" href="struct_d_n_s_query_parameters.html" title="Low-Level DNS Buffer Type.">DNSQueryParameters</a></code> structure, representing both the inital  DNS query and the response (if any). </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="dnsutils-resolv_8cpp_source.html#l00228">228</a> of file <a class="el" href="dnsutils-resolv_8cpp_source.html">dnsutils-resolv.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a46d6b53a26e4bea89df9f7f8756345b6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">DNSQuery::operator const boost::asio::ip::address </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allow type conversion to a <code>boost::asio::ip::address</code>. </p>
<p>Calls the public method <code><a class="el" href="class_d_n_s_query.html#ac02b35631ab44965403bd9fff68b5ae0" title="Convert the internal DNS resource representation to a boost::ip::address.">to_ip()</a></code> to handle the actual conversion.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">boost::asio::ip::address</td><td>An <code>IPv4</code> or <code>IPv6</code> address record. We don't actually care which style of IP address we return: it is up to the caller to ensure they request the correct type.</td></tr>
  </table>
  </dd>
</dl>
<p>Example Usage:</p>
<div class="fragment"><div class="line">DNSName dns_name(a_dns_resource);</div>
<div class="line"><span class="keywordtype">char</span>* a_string{dns_name.to_c_str()};</div>
</div><!-- fragment --> 
<p>Definition at line <a class="el" href="dnsutils__old_8h_source.html#l00694">694</a> of file <a class="el" href="dnsutils__old_8h_source.html">dnsutils_old.h</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_d_n_s_query_a46d6b53a26e4bea89df9f7f8756345b6_cgraph.png" border="0" usemap="#class_d_n_s_query_a46d6b53a26e4bea89df9f7f8756345b6_cgraph" alt=""/></div>
<map name="class_d_n_s_query_a46d6b53a26e4bea89df9f7f8756345b6_cgraph" id="class_d_n_s_query_a46d6b53a26e4bea89df9f7f8756345b6_cgraph">
<area shape="rect" id="node3" href="class_d_n_s_query.html#ac02b35631ab44965403bd9fff68b5ae0" title="Convert the internal DNS resource representation to a boost::ip::address." alt="" coords="193,5,311,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a699e54ed8e105183b5ef7a6f2275688c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">DNSQuery::operator const char * </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allow type conversion to a <code>C-style</code> (<code>char*</code>) string. </p>
<p>Calls the public method <code><a class="el" href="class_d_n_s_query.html#a1dc87f740b5d681cc39c49e24637cecf" title="Convert the internal DNS resource representation to a C-style (char*) string.">to_c_str()</a></code> to handle the actual conversion.</p>
<dl class="section warning"><dt>Warning</dt><dd>the allocated <code>C</code> string must be freed by the caller.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">char*</td><td>A <code>C-style</code> string, representing the internal resource name held by the object.</td></tr>
  </table>
  </dd>
</dl>
<p>Example Usage:</p>
<div class="fragment"><div class="line">DNSName dns_name(a_dns_resource);</div>
<div class="line"><span class="keywordtype">char</span>* a_string{dns_name()};</div>
</div><!-- fragment --> 
<p>Definition at line <a class="el" href="dnsutils__old_8h_source.html#l00675">675</a> of file <a class="el" href="dnsutils__old_8h_source.html">dnsutils_old.h</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_d_n_s_query_a699e54ed8e105183b5ef7a6f2275688c_cgraph.png" border="0" usemap="#class_d_n_s_query_a699e54ed8e105183b5ef7a6f2275688c_cgraph" alt=""/></div>
<map name="class_d_n_s_query_a699e54ed8e105183b5ef7a6f2275688c_cgraph" id="class_d_n_s_query_a699e54ed8e105183b5ef7a6f2275688c_cgraph">
<area shape="rect" id="node3" href="class_d_n_s_query.html#a1dc87f740b5d681cc39c49e24637cecf" title="Convert the internal DNS resource representation to a C&#45;style (char*) string." alt="" coords="193,12,327,39"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="afa21e3d860d1bfded12f0b04b9b21834"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">DNSQuery::operator std::string </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allow type conversions to a <code>std::string</code>. </p>
<p>Calls the public method <code>to_str</code> to handle the actual conversion.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">std::string</td><td>A <code>std::string</code>, representing the internal resource name held by the object.</td></tr>
  </table>
  </dd>
</dl>
<p>Example Usage:</p>
<div class="fragment"><div class="line">DNSName dns_name(a_dns_resource);</div>
<div class="line">std::string a_string{dns_name()};</div>
</div><!-- fragment --> 
<p>Definition at line <a class="el" href="dnsutils__old_8h_source.html#l00655">655</a> of file <a class="el" href="dnsutils__old_8h_source.html">dnsutils_old.h</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_d_n_s_query_afa21e3d860d1bfded12f0b04b9b21834_cgraph.png" border="0" usemap="#class_d_n_s_query_afa21e3d860d1bfded12f0b04b9b21834_cgraph" alt=""/></div>
<map name="class_d_n_s_query_afa21e3d860d1bfded12f0b04b9b21834_cgraph" id="class_d_n_s_query_afa21e3d860d1bfded12f0b04b9b21834_cgraph">
<area shape="rect" id="node3" href="class_d_n_s_query.html#a34e26c08e68da9d9cad559c42c9f9a49" title="Convert the internal DNS resource representation to a std::string." alt="" coords="174,5,295,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2234f5b9f47bc03b4d1dcf032761cfd6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void DNSQuery::send_dns_query </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_d_n_s_query_parameters.html">DNSQueryParameters</a>&#160;</td>
          <td class="paramname"><em>dns_query</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Package a <code>DNS</code> query into a <code><a class="el" href="struct_d_n_s_query_parameters.html" title="Low-Level DNS Buffer Type.">DNSQueryParameters</a></code> structure, and send the query to the local <code>DNS</code> resolver. </p>
<p>Package a  DNS query into a <code><a class="el" href="struct_d_n_s_query_parameters.html" title="Low-Level DNS Buffer Type.">DNSQueryParameters</a></code> structure, and send the query to the local  DNS resolver.</p>
<p>The response will be stored in the <code>DNSQueryParamerters</code> class (in the <code>response</code> field), and should be parsed using the protected function <code><a class="el" href="class_d_n_s_query.html#a542252fbaa872ebc370a0c317400a2ef" title="Extract the named resources from a DNSRecordBuffer of type ns_query_type, returned by the low-level...">extract_resource_records()</a></code>. After parsing, the buffer data will be available through the public accessor functions.</p>
<dl class="section note"><dt>Note</dt><dd>Internally the <code>DNS</code> query is packed into a <code>promise&lt;DNSQueryParameters&gt;</code>. Thus the <code>DNS</code> query <em>may</em> be generated asyncronously to the inital call (depending on the library implementation of the <code>promise</code> class). Further the caller does not have (and  must not depend on) the exact timing of the <code>DNS</code> query used to fulfill the paramaters of the <code>dns_query</code>. However, the caller  must ensure the <code>dns_query</code> has been fulfilled before using the data in that structure. The easiest way to ensure the <code>dns_query</code> structure has been filled in correctly is to call <code><a class="el" href="class_d_n_s_query.html#a20720148968df6c0248bed3c54cf1f16" title="Return a DNSQueryParameters structure, which has been filled in response to an earlier call to send_d...">get_dns_query()</a></code> before using the data.</dd></dl>
<p>Example Usage:</p>
<div class="fragment"><div class="line">cv_dns_query_name = dns_name;</div>
<div class="line">cv_dns_query_type = dns_query_type;</div>
<div class="line"><a class="code" href="class_d_n_s_query.html#a22274959083a0f49ed441a4730649ac8" title="The internal list of DNS records.">cv_dns_record_list</a> = <span class="keyword">new</span> list&lt;string&gt;;</div>
<div class="line"></div>
<div class="line"><a class="code" href="class_d_n_s_query.html#a2234f5b9f47bc03b4d1dcf032761cfd6" title="Package a DNS query into a DNSQueryParameters structure, and send the query to the local DNS resolver...">send_dns_query</a>();</div>
</div><!-- fragment --><p>The response will be stored in the <code>DNSQueryParamerters</code> class (in the <code>response</code> field), and should be parsed using the protected function <code><a class="el" href="class_d_n_s_query.html#a542252fbaa872ebc370a0c317400a2ef" title="Extract the named resources from a DNSRecordBuffer of type ns_query_type, returned by the low-level...">extract_resource_records()</a></code>. After parsing, the buffer data will be available through the public accessor functions.</p>
<dl class="section note"><dt>Note</dt><dd>Internally the  DNS query is packed into a <code>promise&lt;DNSQueryParameters&gt;</code>. Thus the  DNS query <em>may</em> be generated asyncronously to the inital call (depending on the library implementation of the <code>promise</code> class). Further the caller does not have (and  must not depend on) the exact timing of the  DNS query used to fulfill the paramaters of the <code>dns_query</code>. However, the caller  must ensure the <code>dns_query</code> has been fulfilled before using the data in that structure. The easiest way to ensure the <code>dns_query</code> structure has been filled in correctly is to call <code><a class="el" href="class_d_n_s_query.html#a20720148968df6c0248bed3c54cf1f16" title="Return a DNSQueryParameters structure, which has been filled in response to an earlier call to send_d...">get_dns_query()</a></code> before using the data.</dd></dl>
<p>Example Usage:</p>
<div class="fragment"><div class="line">cv_dns_query_name = dns_name;</div>
<div class="line">cv_dns_query_type = dns_query_type;</div>
<div class="line"><a class="code" href="class_d_n_s_query.html#a22274959083a0f49ed441a4730649ac8" title="The internal list of DNS records.">cv_dns_record_list</a> = <span class="keyword">new</span> list&lt;string&gt;;</div>
<div class="line"></div>
<div class="line"><a class="code" href="class_d_n_s_query.html#a2234f5b9f47bc03b4d1dcf032761cfd6" title="Package a DNS query into a DNSQueryParameters structure, and send the query to the local DNS resolver...">send_dns_query</a>();</div>
</div><!-- fragment --> 
<p>Definition at line <a class="el" href="dnsutils-resolv_8cpp_source.html#l00164">164</a> of file <a class="el" href="dnsutils-resolv_8cpp_source.html">dnsutils-resolv.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_d_n_s_query_a2234f5b9f47bc03b4d1dcf032761cfd6_icgraph.png" border="0" usemap="#class_d_n_s_query_a2234f5b9f47bc03b4d1dcf032761cfd6_icgraph" alt=""/></div>
<map name="class_d_n_s_query_a2234f5b9f47bc03b4d1dcf032761cfd6_icgraph" id="class_d_n_s_query_a2234f5b9f47bc03b4d1dcf032761cfd6_icgraph">
<area shape="rect" id="node3" href="class_d_n_s_query.html#abe10624cc033e7d7c5e7f0dbe76e2527" title="Construct a DNSQuery class, defaulting to retrieving a DNSNames::AAAA for the dns_name." alt="" coords="200,12,355,39"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1dc87f740b5d681cc39c49e24637cecf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char * DNSQuery::to_c_str </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert the internal <code>DNS</code> resource representation to a <code>C-style</code> (<code>char*</code>) string. </p>
<p>This does not modify the internal representation of the <code>DNS</code> resource in any way.</p>
<dl class="section warning"><dt>Warning</dt><dd>the allocated <code>C</code> string must be freed by the caller.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">char*</td><td>A <code>C-style</code> string, representing the internal resource name held by the object.</td></tr>
  </table>
  </dd>
</dl>
<p>Example Usage:</p>
<div class="fragment"><div class="line">DNSName dns_name(a_dns_resource);</div>
<div class="line"><span class="keywordtype">char</span>* a_string{dns_name.to_c_str()};</div>
</div><!-- fragment --> 
<p>Definition at line <a class="el" href="dnsutils-resolv_8cpp_source.html#l00408">408</a> of file <a class="el" href="dnsutils-resolv_8cpp_source.html">dnsutils-resolv.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_d_n_s_query_a1dc87f740b5d681cc39c49e24637cecf_icgraph.png" border="0" usemap="#class_d_n_s_query_a1dc87f740b5d681cc39c49e24637cecf_icgraph" alt=""/></div>
<map name="class_d_n_s_query_a1dc87f740b5d681cc39c49e24637cecf_icgraph" id="class_d_n_s_query_a1dc87f740b5d681cc39c49e24637cecf_icgraph">
<area shape="rect" id="node3" href="class_d_n_s_query.html#a699e54ed8e105183b5ef7a6f2275688c" title="Allow type conversion to a C&#45;style (char*) string." alt="" coords="190,5,327,46"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac02b35631ab44965403bd9fff68b5ae0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const boost::asio::ip::address DNSQuery::to_ip </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>recursive</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>prefer_legacy</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert the internal <code>DNS</code> resource representation to a <code>boost::ip::address</code>. </p>
<dl class="section note"><dt>Note</dt><dd>Only certain DNS names can be converted directly to an IP address (namely those from A and AAAA records). If the <code>recursive</code> flag is specified, this routine will attempt to continue the resolution, until a convertible name is found. If the address cannot be converted this class will throw a <code><a class="el" href="class_d_n_s_name_conversion_exception.html" title="Name to IP address failure exception, indicating the DNS name is not a valid IP address (although it ...">DNSNameConversionException</a></code>. If you don't want to handle exceptions, check the type <em>before</em> calling this method.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">recursive</td><td>If the name cannot be directly converted to an <code>IP</code> address, perform additonal lookups to find a name that can be converted. This is primarily useful if the original name is of type <code>DNSRecordType::MX</code> or <code>DNSRecordType::SVR</code>.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">prefer_legacy</td><td>If possible, return <code>IPv4</code> address instead of <code>IPv6</code> addresses. By default the library will return <code>IPv6</code> addresses if at all possible.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">boost::asio::ip::address</td><td>An <code>IPv4</code> or <code>IPv6</code> address record. We don't actually care which style of IP address we return: it is up to the caller to ensure they request the correct type.</td></tr>
  </table>
  </dd>
</dl>
<p>Example Usage:</p>
<div class="fragment"><div class="line">DNSName dns_name(a_dns_resource);</div>
<div class="line"><span class="keywordtype">char</span>* a_string{dns_name.to_c_str()};</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>Only certain DNS names can be converted directly to an IP address (namely those from A and AAAA records). If the <code>recursive</code> flag is specified, this routine will attempt to continue the resolution, until a convertible name is found. If the address cannot be converted this class will throw a <code><a class="el" href="class_d_n_s_name_conversion_exception.html" title="Name to IP address failure exception, indicating the DNS name is not a valid IP address (although it ...">DNSNameConversionException</a></code>. If you don't want to handle exceptions, check the type <em>before</em> calling this method.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">recursive</td><td>If the name cannot be directly converted to an <code>IP</code> address, perform additonal lookups to find a name that can be converted. This is primarily useful if the original name is of type <code>DNSQueryType::MX</code> or <code>DNSQueryType::SVR</code>.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">prefer_legacy</td><td>If possible, return <code>IPv4</code> address instead of <code>IPv6</code> addresses. By default the library will return <code>IPv6</code> addresses if at all possible.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">boost::asio::ip::address</td><td>An <code>IPv4</code> or <code>IPv6</code> address record. We don't actually care which style of IP address we return: it is up to the caller to ensure they request the correct type.</td></tr>
  </table>
  </dd>
</dl>
<p>Example Usage:</p>
<div class="fragment"><div class="line">DNSName dns_name(a_dns_resource);</div>
<div class="line"><span class="keywordtype">char</span>* a_string{dns_name.to_c_str()};</div>
</div><!-- fragment --> 
<p>Definition at line <a class="el" href="dnsutils-resolv_8cpp_source.html#l00470">470</a> of file <a class="el" href="dnsutils-resolv_8cpp_source.html">dnsutils-resolv.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_d_n_s_query_ac02b35631ab44965403bd9fff68b5ae0_icgraph.png" border="0" usemap="#class_d_n_s_query_ac02b35631ab44965403bd9fff68b5ae0_icgraph" alt=""/></div>
<map name="class_d_n_s_query_ac02b35631ab44965403bd9fff68b5ae0_icgraph" id="class_d_n_s_query_ac02b35631ab44965403bd9fff68b5ae0_icgraph">
<area shape="rect" id="node3" href="class_d_n_s_query.html#a46d6b53a26e4bea89df9f7f8756345b6" title="Allow type conversion to a boost::asio::ip::address." alt="" coords="174,5,311,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a34e26c08e68da9d9cad559c42c9f9a49"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const string DNSQuery::to_str </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert the internal <code>DNS</code> resource representation to a <code>std::string</code>. </p>
<p>Convert the internal <code>DNS</code> resource representation to a <code>string</code>.</p>
<p>This does not modify the internal representation of the <code>DNS</code> resource in any way.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">std::string</td><td>A <code>std::string</code>, representing the internal resource name held by the object.</td></tr>
  </table>
  </dd>
</dl>
<p>Example Usage:</p>
<div class="fragment"><div class="line">DNSName dns_name(a_dns_resource);</div>
<div class="line">std::string a_string{dns_name.to_c_str()};</div>
</div><!-- fragment --><p>This does not modify the internal representation of the <code>DNS</code> resource in any way.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>A <code>string</code>, representing the internal resource name held by the object.</td></tr>
  </table>
  </dd>
</dl>
<p>Example Usage:</p>
<div class="fragment"><div class="line">DNSName dns_name(a_dns_resource);</div>
<div class="line"><span class="keywordtype">string</span> a_string{dns_name.to_c_str()};</div>
</div><!-- fragment --> 
<p>Definition at line <a class="el" href="dnsutils-resolv_8cpp_source.html#l00366">366</a> of file <a class="el" href="dnsutils-resolv_8cpp_source.html">dnsutils-resolv.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_d_n_s_query_a34e26c08e68da9d9cad559c42c9f9a49_icgraph.png" border="0" usemap="#class_d_n_s_query_a34e26c08e68da9d9cad559c42c9f9a49_icgraph" alt=""/></div>
<map name="class_d_n_s_query_a34e26c08e68da9d9cad559c42c9f9a49_icgraph" id="class_d_n_s_query_a34e26c08e68da9d9cad559c42c9f9a49_icgraph">
<area shape="rect" id="node3" href="class_d_n_s_query.html#afa21e3d860d1bfded12f0b04b9b21834" title="Allow type conversions to a std::string." alt="" coords="176,5,296,32"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a8077833d9094386c5a9893a8fa800a76"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">DNSQueryFuture DNSQuery::cv_dns_query_future</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Holds the sturcture that is returned in <code><a class="el" href="class_d_n_s_query.html#a20720148968df6c0248bed3c54cf1f16" title="Return a DNSQueryParameters structure, which has been filled in response to an earlier call to send_d...">get_dns_query()</a></code>, following a previous call to <code><a class="el" href="class_d_n_s_query.html#a2234f5b9f47bc03b4d1dcf032761cfd6" title="Package a DNS query into a DNSQueryParameters structure, and send the query to the local DNS resolver...">send_dns_query()</a></code>. </p>

<p>Definition at line <a class="el" href="dnsutils__old_8h_source.html#l00519">519</a> of file <a class="el" href="dnsutils__old_8h_source.html">dnsutils_old.h</a>.</p>

</div>
</div>
<a class="anchor" id="afdc2251853c1db01be0943a68e2aad9a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">DNSQueryPromise DNSQuery::cv_dns_query_promise</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Holds the structure to be returned by a <code>DNS</code> query, on behalf of <code><a class="el" href="class_d_n_s_query.html#a2234f5b9f47bc03b4d1dcf032761cfd6" title="Package a DNS query into a DNSQueryParameters structure, and send the query to the local DNS resolver...">send_dns_query()</a></code>. </p>

<p>Definition at line <a class="el" href="dnsutils__old_8h_source.html#l00515">515</a> of file <a class="el" href="dnsutils__old_8h_source.html">dnsutils_old.h</a>.</p>

</div>
</div>
<a class="anchor" id="a22274959083a0f49ed441a4730649ac8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">DNSList DNSQuery::cv_dns_record_list</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The internal list of DNS records. </p>
<p>Usually this is only used by the internal type conversion routines </p>

<p>Definition at line <a class="el" href="dnsutils__old_8h_source.html#l00508">508</a> of file <a class="el" href="dnsutils__old_8h_source.html">dnsutils_old.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/utils/<a class="el" href="dnsutils__old_8h_source.html">dnsutils_old.h</a></li>
<li>lib/utils/<a class="el" href="dnsutils-resolv_8cpp_source.html">dnsutils-resolv.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Dec 20 2012 22:34:44 for TreeRat by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.2
</small></address>
</body>
</html>
